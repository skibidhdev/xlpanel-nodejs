<%- include('partials/header') %>

<div class="min-h-screen flex items-center justify-center py-12 px-4">
  <div class="max-w-md w-full">
    <div class="card">
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold mb-2">Create Account</h2>
        <p class="text-secondary">Join <%= typeof name !== 'undefined' ? name : 'XLPanel' %> to manage your servers</p>
      </div>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="bg-error bg-opacity-10 text-error px-4 py-3 rounded-lg mb-6">
          <div class="flex items-center gap-2">
            <i class="fas fa-exclamation-circle"></i>
            <p><%= error %></p>
          </div>
        </div>
      <% } %>

      <form action="/register" method="POST" class="space-y-6">
        <div>
          <label for="username" class="block text-sm font-medium mb-2">Username</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-secondary">
              <i class="fas fa-user"></i>
            </span>
            <input 
              type="text" 
              id="username" 
              name="username" 
              class="input pl-10" 
              placeholder="Choose a username"
              required
              autocomplete="username"
              minlength="3"
              maxlength="20"
              pattern="[a-zA-Z0-9_-]+"
              title="Username can only contain letters, numbers, underscores and hyphens"
            >
          </div>
        </div>

        <div>
          <label for="email" class="block text-sm font-medium mb-2">Email</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-secondary">
              <i class="fas fa-envelope"></i>
            </span>
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="input pl-10" 
              placeholder="Enter your email"
              required
              autocomplete="email"
            >
          </div>
        </div>

        <div>
          <label for="password" class="block text-sm font-medium mb-2">Password</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-secondary">
              <i class="fas fa-lock"></i>
            </span>
            <input 
              type="password" 
              id="password" 
              name="password" 
              class="input pl-10" 
              placeholder="Create a password"
              required
              autocomplete="new-password"
              minlength="8"
            >
          </div>
          <p class="mt-1 text-sm text-secondary">Must be at least 8 characters</p>
        </div>

        <div>
          <label for="confirm_password" class="block text-sm font-medium mb-2">Confirm Password</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-secondary">
              <i class="fas fa-lock"></i>
            </span>
            <input 
              type="password" 
              id="confirm_password" 
              name="confirm_password" 
              class="input pl-10" 
              placeholder="Confirm your password"
              required
              autocomplete="new-password"
            >
          </div>
        </div>

        <div>
          <button type="submit" class="btn btn-primary w-full">
            <i class="fas fa-user-plus"></i>
            Create Account
          </button>
        </div>
      </form>

      <div class="mt-6 text-center">
        <p class="text-sm text-secondary">
          Already have an account? 
          <a href="/login" class="text-primary hover:text-primary-dark font-medium">
            Sign in instead
          </a>
        </p>
      </div>
    </div>

    <div class="mt-8 text-center text-sm text-secondary">
      <p>By creating an account, you agree to our Terms of Service and Privacy Policy</p>
    </div>
  </div>
</div>

<style>
.min-h-screen {
  min-height: 100vh;
}
.inset-y-0 {
  top: 0;
  bottom: 0;
}
.left-0 {
  left: 0;
}
.pl-3 {
  padding-left: 0.75rem;
}
.pl-10 {
  padding-left: 2.5rem;
}
.absolute {
  position: absolute;
}
.relative {
  position: relative;
}
.bg-opacity-10 {
  --tw-bg-opacity: 0.1;
}
.max-w-md {
  max-width: 28rem;
}
.py-12 {
  padding-top: 3rem;
  padding-bottom: 3rem;
}
.px-4 {
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Password validation styles */
input:invalid {
  border-color: var(--error);
}
input:invalid:focus {
  border-color: var(--error);
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.3);
}
</style>

<script>
// Password confirmation validation
const password = document.getElementById('password');
const confirmPassword = document.getElementById('confirm_password');

function validatePassword() {
  if (password.value !== confirmPassword.value) {
    confirmPassword.setCustomValidity("Passwords don't match");
  } else {
    confirmPassword.setCustomValidity('');
  }
}

password.addEventListener('change', validatePassword);
confirmPassword.addEventListener('keyup', validatePassword);
</script>

<%- include('partials/footer') %>
